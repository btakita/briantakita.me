---
import { H_ } from '@btakita/domain--all--blog'
import { V_main } from '@btakita/ui--server--blog'
import { V_raw } from '@ctx-core/vanjs'
import type { PlateVan } from 'van-type-delegate'
import Footer from '../components/Footer.astro'
import Header from '../components/Header.astro'
import Van from '../components/Van.astro'
import { SITE } from '../config'
import Layout from './Layout.astro'
import { server__ctx__new } from '../lib'
export interface Props {
	frontmatter:{
		title:string
		active?:boolean
		description?:string
	}
}
const ctx = server__ctx__new(Astro)
const { title, description, active } = Astro.props.frontmatter
const H = H_(ctx)
const { article } = H
const html = await Astro.slots.render('default')
---

<Layout title={`${title} | ${SITE.title}`}>
	<Header ctx={ctx} active={active}/>
	<Van dom={
		V_main({
				ctx,
				class: 'prose',
				title,
				description
			},
			article({
				id: active,
				class: 'mb-28 max-w-3xl prose-img:border-0'
			}, V_raw<PlateVan>(ctx, html)))
	}/>
	<Footer ctx={ctx}/>
</Layout>
